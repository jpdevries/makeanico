"use strict";function addComponent(a){return new Promise(function(b,c){return $("lazy__"+a)?void fetch("/api/components/"+a,{method:"get"}).then(function(c){c.text().then(function(c){try{$("lazy__"+a).outerHTML=c}catch(a){}b(c)})}):void c()})}function addStyle(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1];b&&document.getElementById("id")&&document.getElementById("id").remove(),document.querySelector("head").innerHTML+='<link rel="stylesheet"'+(b?" id="+b:"")+' href="assets/css/preferences'+min+'.css">'}function addScript(a){var b=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];return new Promise(function(c,d){var e=document.createElement("script");return e.src=a,b&&(e.setAttribute("id","scripts__"+b),$("scripts__"+b))?void c():(e.onload=function(a){c()},e.onerror=function(a){d()},void document.body.appendChild(e))})}function addLazy(){addScript("/assets/js/common"+min+".js","common").then(function(){return addScript("/assets/js/lazylist"+min+".js","lazylist")})}function doCellChange(){addScript("/assets/js/globals"+min+".js","globals").then(function(){return addScript("/assets/js/common"+min+".js","common")}).then(function(){return addScript("/assets/js/app"+min+".js","app")}).then(function(){return Promise.all([addComponent("export"),addComponent("keyboard"),addComponent("alert")])}).then(function(){return alertBanner=$("alert-banner"),Promise.all([addScript("/assets/js/components/export"+min+".js","export"),addScript("/assets/js/components/shortcuts"+min+".js","shortcuts")])}).then(function(){alertBanner.removeAttribute("hidden"),alertBanner.removeAttribute("aria-hidden"),setTimeout(function(){alertBanner.setAttribute("hidden","true"),alertBanner.setAttribute("aria-hidden","true")},5e3)}).then(function(){return document.dispatchEvent(new Event("enhancementsloaded"))})}function handleCellChange(){makeanico.removeEventListener("change",handleCellChange),doCellChange()}var alertBanner,saveSwatchBtn=document.createElement("button"),fillColor=[255,255,255,100],initSwatch,inputColorByTextColor=$("input_color_by__text__color"),inputColorByTextRadio=$("input_color_by__text");if(NodeList.prototype.forEach=Array.prototype.forEach,"undefined"!=typeof Promise&&Promise.toString().indexOf("[native code]")!==-1||document.write('<script src="assets/js/polyfills/es6-promise'+min+'.js"></script>'),document.querySelectorAll("[no-js]").forEach(function(a){a.remove()}),$("fill-cells-on-click").removeAttribute("disabled"),"serviceWorker"in navigator,1,fillCellsOnClick.checked=!0,fillSelectedCells.setAttribute("disabled","true"),supportsLocalStorage()&&!function(){var a=function(){addComponent("swatches").then(function(){return addScript("/assets/js/common"+min+".js","common").then(function(){return addScript("/assets/js/components/swatches"+min+".js","swatches")})})};saveSwatchBtn.innerHTML="Save Swatch",document.querySelector("#cell-grid__container footer").appendChild(saveSwatchBtn),localStorage.getItem("swatchesStore")?a():!function(){var b=function b(c){c.preventDefault(),saveSwatchBtn.removeEventListener("click",b),initSwatch=fillColor,a()};saveSwatchBtn.addEventListener("click",b)}()}(),inputColorByTextColor.addEventListener("focus",function(){inputColorByTextRadio.checked=!0,addLazy()}),$("input_color_by__text").addEventListener("change",function(a){a.stopPropagation(),addLazy()}),!so){makeanico.addEventListener("change",handleCellChange);try{localStorage.getItem("fillColor")&&doCellChange()}catch(a){}}try{supportsLocalStorage()&&(localStorage.getItem("contrast")||localStorage.getItem("fontsize")||localStorage.getItem("typeface"))&&addScript("/assets/js/preferences"+min+".js","preferences").then(function(){return addStyle("/assets/css/preferences"+min+".css","preferences")}).then(function(){localStorage.getItem("contrast")&&handlePrefFormChange("contrast",localStorage.getItem("contrast")),localStorage.getItem("fontsize")&&handlePrefFormChange("fontsize",localStorage.getItem("fontsize")),localStorage.getItem("typeface")&&(handlePrefFormChange("typeface",localStorage.getItem("typeface")),handlePrefTypefaceFormChange(localStorage.getItem("typeface")))}).then(function(){return new Promise(function(a,b){return supportsLocalStorage()&&"auto"==localStorage.getItem("contrast")?addScript("/assets/js/preferences_contrastlisteners"+min+".js","preferences_contrastlisteners").then(function(){return a()}):b()})}).then(function(){return addLuminosityListener()},function(a){return a})}catch(a){}