@import "bourbon/bourbon";
@import "neat/neat";
@import "spec/tacular";

$dangerous:rgb(201, 0, 5);

$square: min-aspect-ratio #{1}/#{1};

%flexible {
  display:flex;
}

%outer-container {
  @include outer-container;
}

%container {
  padding:1em;
}

%balanced {
  text-align:center;
}

%dangerous {
  color:$dangerous;
}

%bright-container {
  @extend %container;
  background:white;
  border:1px solid rgb(220, 220, 220);
}

%cell {
  background:white;
  max-width:30em;
  header {
    p {
      text-align:center;
    }
  }
}

%full-width-full-height {
  @extend %very-greedy;
  height:100%;
}

$topMost:999999;
%topMost {
  z-index:99999;
}

%padded-cell {
  @extend %cell;
  padding:.5em .5em 1em .5em;
}

%easy {
  html.do-transitions & {
    transition:all 240ms ease;
  }
}

%bordered {
  border:1px solid rgb(220, 220, 220);
}

%margin-center {
  margin:0 auto;
}

body {
  margin:0;
	font-family: sans-serif;
  background:rgb(240,240,240);
}

fieldset {
  @extend %bordered;
  &.rgb {
    margin-top:1em;
  }
  .fieldset {
    &:last-of-type {
      margin-bottom:0;
    }
  }
}

hr {
  border:none;
  border-top:1px solid rgb(220, 220, 220);
}

%heavy-btn {
  background:darkgreen;
  border-color:darken(darkgreen,6%);
  color:white;
}

%button {
  font-family:BlinkMacSystemFont, sans-serif;
  color:black;
  color: buttontext;
  background: white;
  padding: em(2px) em(6px) em(3px);
  border-width: 1px;
  border-radius:em(4px);
  border-style: solid;
  border-color:rgb(192, 192, 192);
  //border-color: buttonface;

  @extend %easy;

  &.heavy {
    display:inline-block;
    @extend %heavy-btn;

    &[hidden] {
      display:none;
    }

    &:focus, &:active, &:hover {
      background:darken(darkgreen,6%);
      border-color:darken(darkgreen,12%);
    }
  }

  &.comfortable, &.comforatbly {
    padding: .5em 1em;
  }
}

#start-over {
  a {
    &:hover, &:focus, &:active {
      @extend %dangerous;
    }
  }
}

nav.button-bar {
  padding:1em 0;
}

a.btn {
  @extend %button;
  text-decoration:none;
}

.download-as {
  font-size:13px;
}

.button-bar {
  font-size:13px;

  label {
    margin-right:1em;
    &:last-of-type {
      margin-right:0;
    }
  }

  a {
    @extend %clickable;
    margin-right:1em;
    text-transform:lowercase;

    &:last-of-type {
      margin-right:0;
    }
  }
}

.accessibly-hidden {
  @extend %accessibly-hidden;
}

#makeanico {
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content: space-around;
}

#canvas {
  width:100vw;
  height:100vw;
  flex:0 0 100vw;
  //@extend %margin-center;

  th,td {
    width:6.25vw;
  }

  th,.row-col {
    font-weight:normal;
    font-size:8px;
  }

  @include media($square) {
    width:100vh;
    height:100vh;
    flex:0 0 100vh;
  }
}

#stage, table {
  @extend %full-width-full-height;
}

#stage {
  @extend %unaligned; // text-align:center
  table {
    @extend %very-greedy;
  }
  td {
    @extend %cell;
    border-right:1px solid rgb(240,240,240);
    border-bottom:1px solid rgb(240,240,240);
  }
}

.svg-preview {
  @extend %unaligned; // text-align:center
  svg {
    @extend %margin-center;
  }
}

fieldset, .fieldset {
  margin-bottom:1em;
}

#cell-grid {
  @extend %unaligned; // text-align:center
  //margin:1em auto;
  > * {
    @extend %padded-cell;
    @extend %margin-center;
    text-align:left;
  }
}

#stage {
  input[type="checkbox"] {
    @extend %topMost;
    @extend %absolute-corners;
    @extend %clickable;
    @extend %full-width-full-height;
    appearance: none;
    background:transparent;
    opacity:0;
  }

  input[type="checkbox"] + label {
    @extend %topMost;
    @extend %absolute-corners;
    @extend %clickable;
    text-indent:-99999em;
  }

  input[type="checkbox"]:checked + label {
    //outline:3px solid rgb(255,0,255);
    box-shadow: 0 0 5px #51cbee;
    outline: 1px solid #51cbee;
    //filter: hue-rotate(90deg);
  }

  td {
    position:relative;
    &.row-col {
      position:absolute;
    }
    &:first-of-type {
      width:1em;
    }
  }
}

.flexible {
  @extend %flexible;
  &.unaligned {
    justify-content: center;
  }
  &.fieldset {
    label[for*="rgb_slider_"] {
      flex:0 0 3em;
    }
    input[type="text"], input[type="range"] {
      flex-grow:1;
    }
    > * {
      margin-right:1em;
    }
    > *:last-child {
      margin-right:0;
    }
  }
}

.input-by-color {
  .flexible {
    justify-content: space-around;
  }
}

footer {
  p {
    &:last-of-type {
      margin-bottom:0;
    }
  }
  button {
    margin-right:1em;
    &:last-of-type {
      margin-right:0;
    }
  }
}

.subtle {
  font-size:.8em;
  a {
    color:currentColor;
    &:visited {
      color:currentColor;
    }
  }
}

.unaligned {
  @extend %unaligned;
}

#cell-grid {
  h3 {
    @extend %unaligned; // text-align:center
    margin:.5em;
  }
}

#cell-grid__container {
  transition:border-color 420ms linear;
  font-size:.9em;
  &.dirty {
    border-width:3px;
  }
}

.neat.container {
  @extend %outer-container;
}

%widget {
  margin-top:1em;
  > .container {
    @extend %balanced;
    position:relative;
    max-width:30em;
    flex-basis:30em;
  }
}

.export {
  button {
    margin-right:1em;
  }
}

.bottom-bar {
  padding-bottom:1em;
  @include media($gtMobile) {
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    > * {
      display: flex;
      flex-grow: 0;
      flex-shrink: 1;
      flex-basis: 20em;

      margin-right:1em;
      &:last-child {
        margin-right:0;
      }
    }

  }
}

label[for="filename__text"] {
  margin-right:1em;
}

footer {
  @extend %balanced;
  margin:1em 0;
  a {
    padding:0 1em;
  }
}

body {
  padding-bottom:1em;
}

.flexible {
  input[type="text"] {
    flex-grow:1;
  }
}

.widget {
  @extend %widget;
  &.import {
    flex-basis:24em;
    button {
      @extend %easy;
      @extend %button;
      @extend %clickable;
      @extend %balanced;
      font-size:1em;
      background:rgb(245,245,245);
      &:hover, &:focus, &:active {
        background:white;
      }
      html & {
        //@extend %heavy-btn;
      }
      display:block;
    }
    label[for="pic"] {
      @extend %clickable;
      margin-bottom:1em;
      margin-right:1em;
      display:inline-block;
    }
    .svg-preview__svg {
      @extend %clickable;
    }
    button {
      margin:2em auto 0 auto;
    }
  }

  &.export, &.import {
    > .container {
      padding-bottom:4em;
    }
    .button-bar {
      position:absolute;
      bottom:1em;
      left:0;
      right:0;
      padding:0;
    }
  }
}

#page-wrapper {
  display:flex;
  flex-wrap:wrap;
  flex-direction:column-reverse;
  > * {
    width:100vw;
  }
}

.container {
  @extend %bright-container;
}

.async-btns {
  @extend %unaligned;
}

.canpx {
  fieldset:last-child {
    margin-bottom:0;
  }
  footer {
    @extend %unaligned; // text-align:center
    margin-top:1em;
  }
}
